<!doctype html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Station 3 ‚Äì Yara (Aufgabe)</title>

    <style>
        :root{
            /* === VARIANTE A: Monochrom + Charakter-Akzent (Yara = Gelb/Orange) === */
            --accent: #ffb000;
            --accent-2: #ff7a00;

            --bg-0: #0e0f12;
            --bg-1: #14161b;
            --bg-2: #1b1f27;

            --card: rgba(255,255,255,0.92);
            --text: #14161b;
            --muted: rgba(20,22,27,0.72);
            --line: rgba(20,22,27,0.18);
            --shadow: rgba(0,0,0,0.35);
        }

        html, body{
            margin:0;
            padding:0;
            font-family: Arial, sans-serif;
            color: var(--text);
            background:
                    radial-gradient(circle at top, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.00) 42%),
                    radial-gradient(circle at 20% 15%, rgba(255,255,255,0.05), rgba(255,255,255,0.00) 60%),
                    linear-gradient(180deg, var(--bg-0) 0%, var(--bg-1) 45%, var(--bg-2) 100%);
        }

        body{
            min-height:100vh;
            display:flex;
            justify-content:center;
            align-items:flex-start;
            padding:30px;
            box-sizing:border-box;
        }

        .wrap{ width:min(1100px, 95vw); display:grid; gap:16px; }

        .card{
            background: var(--card);
            border-radius: 18px;
            padding: 20px;
            box-shadow: 0 12px 35px var(--shadow);
            border:1px solid var(--line);
            backdrop-filter: blur(2px);
        }

        h2{ margin:0 0 10px 0; font-size:28px; color: var(--text); }
        p{ margin:0; line-height:1.6; color: var(--muted); }

        .toolbar{
            display:flex;
            gap:10px;
            flex-wrap:wrap;
            margin-top:14px;
            align-items:center;
        }

        button{
            border:none;
            cursor:pointer;
            border-radius:999px;
            padding:10px 14px;
            font-weight:bold;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            color:#14161b;
            box-shadow: 0 10px 22px rgba(255,176,0,0.20);
            transition: filter 0.12s ease, transform 0.12s ease, opacity 0.12s ease;
            border:1px solid rgba(0,0,0,0.10);
        }
        button:hover{ filter:brightness(1.03); transform: translateY(-1px); }
        button:disabled{ opacity:0.55; cursor:not-allowed; transform:none; }

        /* Textbereich */
        .paper{
            margin-top:14px;
            border-radius:16px;
            border:2px dashed rgba(0,0,0,0.22);
            background: rgba(255,255,255,0.70);
            padding:16px;
            line-height:2.0;
            font-size:16px;
            max-height: 460px;
            overflow-y: auto;

            box-shadow:
                    inset 0 0 0 2px rgba(255,176,0,0.10),
                    inset 0 18px 35px rgba(0,0,0,0.06),
                    0 12px 28px rgba(0,0,0,0.08);
        }

        /* Tokens */
        .token{
            cursor:pointer;
            padding: 1px 3px;
            margin: 0 1px;
            border-radius: 4px;
            background: transparent;
            transition: all 0.15s ease;
            display:inline-block;
            border-bottom: 2px solid rgba(255,176,0,0.25);
            user-select:none;
            color: rgba(20,22,27,0.88);
        }
        .token:hover{
            background: rgba(255,176,0,0.15);
            border-bottom-color: var(--accent);
            transform: translateY(-1px);
        }
        .token.active{
            background: rgba(255, 230, 120, 0.95);
            border-bottom-color: #eebb00;
            color: #14161b;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.10);
        }

        .para{ margin: 16px 0; }

        .hint{
            margin-top:10px;
            font-size:13px;
            opacity:0.90;
            color: var(--muted);
        }

        .links{
            margin-top:12px;
            display:flex;
            gap:14px;
            flex-wrap:wrap;
            align-items:center;
        }

        a.link{
            text-decoration:none;
            font-weight:bold;
            color: var(--text);
        }

        a.primary{
            padding:10px 14px;
            border-radius:999px;
            color:#14161b;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            box-shadow: 0 10px 22px rgba(255,176,0,0.20);
            border:1px solid rgba(0,0,0,0.10);
        }
        a.primary:hover{ filter:brightness(1.03); }

        .status{
            margin-top:10px;
            font-size:13px;
            opacity:0.9;
            display:flex;
            gap:10px;
            align-items:center;
            flex-wrap:wrap;
        }
        .pill{
            background: rgba(0,0,0,0.04);
            border:1px solid rgba(0,0,0,0.12);
            padding:6px 10px;
            border-radius:999px;
            color: rgba(20,22,27,0.80);
        }
    </style>
</head>

<body>
<div class="wrap">
    <div class="card">
        <h2>üìö Yaras Aufgabe ‚Äì Hinweise markieren</h2>
        <p>
            Klicke auf W√∂rter oder Zeichen, die nach KI klingen (z.B. ‚ÄûZusammenfassend‚Äú, ‚Äûsehr‚Äú).<br>
            <b>Tipp:</b> Fahre mit der Maus √ºber den Text: Hover zeigt dir klickbare Teile (Signifier).
        </p>

        <div class="toolbar">
            <button id="undo" type="button" disabled>‚Ü©Ô∏è R√ºckg√§ngig</button>
            <button id="reset" type="button">üßπ Alles zur√ºcksetzen</button>
        </div>

        <div class="status">
            <span class="pill" id="countPill">Markiert: 0</span>
            <span class="pill" id="undoPill">Undo verf√ºgbar: nein</span>
        </div>

        <div class="paper">
            <b>Beispieltext (gemischt):</b><br><br>
            <div id="tokenText">
                K√ºnstliche Intelligenz ist ein sehr wichtiges Thema, das in vielen Bereichen Anwendung findet.
                Es gibt zahlreiche Vorteile, die durch den Einsatz von KI entstehen k√∂nnen. Gleichzeitig sollte man jedoch auch Herausforderungen ber√ºcksichtigen.

                Ich habe gestern gemerkt, dass ich beim Schreiben oft viel zu sp√§t anfange.
                Dann nehme ich Abk√ºrzungen ‚Äî und manchmal w√§re Hilfe ganz gut.
                Dabei ist es wichtig, verantwortungsvoll mit der Technologie umzugehen, denn KI kann sowohl positive als auch negative Effekte haben.

                Zusammenfassend l√§sst sich sagen, dass KI eine bedeutende Rolle spielt und man sie sinnvoll nutzen sollte.
            </div>
        </div>

        <div class="hint">
            Typische Hinweise: sehr allgemeine W√∂rter (‚Äûwichtig‚Äú, ‚Äûzahlreich‚Äú), perfekte Struktur, Floskeln (‚ÄûZusammenfassend‚Ä¶‚Äú), wenig echte Beispiele.
        </div>

        <div class="links">
            <a class="link primary" href="abschluss.html">Weiter ‚Üí Wand der Erkenntnisse</a>
        </div>
    </div>
</div>

<script>
    const resetBtn = document.getElementById("reset");
    const undoBtn  = document.getElementById("undo");
    const tokenText = document.getElementById("tokenText");

    const countPill = document.getElementById("countPill");
    const undoPill = document.getElementById("undoPill");

    const undoStack = [];

    function tokenize(line) {
        return line.match(/[\p{L}\p{N}]+|[^\s\p{L}\p{N}]/gu) || [];
    }

    function updateUI() {
        const marked = document.querySelectorAll(".token.active").length;
        countPill.textContent = `Markiert: ${marked}`;

        const hasUndo = undoStack.length > 0;
        undoBtn.disabled = !hasUndo;
        undoPill.textContent = `Undo verf√ºgbar: ${hasUndo ? "ja" : "nein"}`;
    }

    function renderTokenizedText() {
        const raw = tokenText.textContent;
        const lines = raw.split("\n");

        const container = document.createElement("div");

        lines.forEach(line => {
            const trimmed = line.trim();
            if (trimmed.length === 0) {
                const spacer = document.createElement("div");
                spacer.className = "para";
                container.appendChild(spacer);
                return;
            }

            const tokens = tokenize(trimmed);
            const p = document.createElement("div");
            p.className = "para";

            tokens.forEach((t, idx) => {
                const span = document.createElement("span");
                span.className = "token";
                span.textContent = t;

                span.addEventListener("click", () => {
                    const wasActive = span.classList.contains("active");
                    span.classList.toggle("active");
                    const isActive = span.classList.contains("active");

                    undoStack.push(() => {
                        span.classList.toggle("active", wasActive);
                        updateUI();
                    });

                    if (wasActive === isActive) undoStack.pop();
                    updateUI();
                });

                p.appendChild(span);

                const next = tokens[idx + 1];
                const isPunct = (x) => x && /[^\p{L}\p{N}]/u.test(x);
                if (next && !isPunct(next)) p.appendChild(document.createTextNode(" "));
            });

            container.appendChild(p);
        });

        tokenText.innerHTML = "";
        tokenText.appendChild(container);
    }

    undoBtn.addEventListener("click", () => {
        const action = undoStack.pop();
        if (action) action();
        updateUI();
    });

    resetBtn.addEventListener("click", () => {
        const activeNow = Array.from(document.querySelectorAll(".token.active"));
        if (activeNow.length === 0) return;

        const snapshot = activeNow.map(el => el);
        undoStack.push(() => {
            snapshot.forEach(el => el.classList.add("active"));
            updateUI();
        });

        document.querySelectorAll(".token.active").forEach(t => t.classList.remove("active"));
        updateUI();
    });

    renderTokenizedText();
    updateUI();
</script>
</body>
</html>
