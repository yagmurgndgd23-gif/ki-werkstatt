<!doctype html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mateo ‚Äì Aufgabe</title>

    <style>
        :root{
            /* Variante A: Monochrome Basis + Charakter-Akzent */
            --accent: #1e6fff;      /* Mateo = Blau */
            --accent-2: #0b4fd6;    /* dunkleres Blau */
            --bg-0: #0e0f12;        /* fast schwarz */
            --bg-1: #14161b;        /* dunkelgrau */
            --bg-2: #1b1f27;        /* mittel-dunkel */
            --card: rgba(255,255,255,0.92);
            --text: #14161b;
            --muted: rgba(20,22,27,0.72);
            --line: rgba(20,22,27,0.18);
            --shadow: rgba(0,0,0,0.35);
        }

        body{
            margin:0;
            font-family: Arial, sans-serif;

            /* Monochrome Hintergrund statt Lila-Verlauf */
            background:
                    radial-gradient(circle at top, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.00) 42%),
                    radial-gradient(circle at 20% 15%, rgba(255,255,255,0.05), rgba(255,255,255,0.00) 60%),
                    linear-gradient(180deg, var(--bg-0) 0%, var(--bg-1) 45%, var(--bg-2) 100%);

            min-height:100vh;
            display:flex;
            justify-content:center;
            align-items:center;
            padding:30px;
            color: var(--text);
            box-sizing:border-box;
        }
        .wrap{ width:min(1100px, 95vw); display:grid; gap:16px; }
        .card{
            background: var(--card);
            border-radius: 18px;
            padding: 20px;
            box-shadow: 0 12px 35px var(--shadow);
            border:1px solid var(--line);
            backdrop-filter: blur(2px);
        }

        .nav{ display:flex; gap:10px; flex-wrap:wrap; }
        .pill{
            padding:8px 12px;
            border-radius:999px;
            text-decoration:none;
            font-weight:bold;
            font-size:13px;
            background: rgba(255,255,255,0.85);
            color: var(--text);
            border:1px solid var(--line);
            box-shadow: 0 10px 22px rgba(0,0,0,0.10);
        }
        .pill.active{
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            color:white;
            border-color: rgba(255,255,255,0.18);
        }

        h2{ margin:12px 0 10px 0; }
        p{ margin:0; line-height:1.6; color: var(--muted); }
        p b{ color: var(--text); }

        .scene-grid{
            display:grid;
            grid-template-columns: repeat(3, 1fr);
            gap:12px;
            margin-top:14px;
        }

        .scene{
            background: rgba(255,255,255,0.78);
            border:1px solid var(--line);
            border-radius:14px;
            padding:12px;
            box-shadow: 0 10px 22px rgba(0,0,0,0.10);
            cursor:pointer;
            transition: transform 0.12s ease, filter 0.12s ease;
            min-height:150px;
            position:relative;
            overflow:hidden;
        }
        .scene:hover{ transform: translateY(-2px); filter: brightness(1.02); }
        .scene.selected{
            outline: 3px solid rgba(30,111,255,0.55);
            background: rgba(30,111,255,0.06);
        }

        .scene-title{
            font-weight:800;
            font-size:13px;
            color: var(--text);
            margin-bottom:8px;
            display:flex;
            gap:8px;
            align-items:center;
            flex-wrap:wrap;
        }
        .tag{
            font-size:11px;
            padding:4px 8px;
            border-radius:999px;
            background: rgba(30,111,255,0.10);
            border:1px solid rgba(30,111,255,0.18);
            color: var(--text);
            font-weight:800;
        }
        .scene-text{ margin:0; font-size:14px; line-height:1.45; color: var(--muted); }

        /* Screenshot */
        .shot{
            margin-top:10px;
            border-radius:12px;
            border:1px solid var(--line);
            background: rgba(255,255,255,0.70);
            box-shadow: inset 0 0 0 1px rgba(30,111,255,0.06);
            overflow:hidden;
            cursor: zoom-in;
        }
        .shot img{
            width:100%;
            height:170px;
            object-fit:cover;
            display:block;
            transition: transform 0.15s ease, filter 0.15s ease;
        }
        .shot:hover img{
            transform: scale(1.02);
            filter: brightness(1.03);
        }
        .shot-caption{
            font-size:12px;
            opacity:0.85;
            padding:8px 10px;
            color: var(--text);
            border-top:1px solid rgba(0,0,0,0.08);
        }

        .toolbar{
            display:flex;
            gap:10px;
            flex-wrap:wrap;
            margin-top:14px;
            align-items:center;
            padding:10px;
            border-radius:16px;
            background: rgba(255,255,255,0.70);
            border:1px solid var(--line);
            box-shadow: 0 10px 22px rgba(0,0,0,0.08);
            min-height: 56px;
        }

        button{
            border:none;
            cursor:pointer;
            border-radius:999px;
            padding:10px 14px;
            font-weight:bold;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            color:white;
            box-shadow: 0 10px 22px rgba(30,111,255,0.20);
            transition: all 0.2s ease;
            opacity: 0.5;
            pointer-events: none;
            display:flex;
            align-items:center;
            gap:8px;
        }
        button.active-btn { opacity: 1; pointer-events: all; }
        button.active-btn:hover{ filter:brightness(1.05); transform: translateY(-1px); }

        .secondary{
            background: rgba(255,255,255,0.92);
            color: var(--text);
            border:1px solid var(--line);
            box-shadow: 0 10px 22px rgba(0,0,0,0.10);
            opacity: 1;
            pointer-events: all;
        }

        .zones{
            margin-top:14px;
            display:grid;
            grid-template-columns: repeat(4, 1fr);
            gap:12px;
        }
        .zone{
            border-radius:16px;
            border:2px dashed rgba(0,0,0,0.22);
            background:
                    radial-gradient(circle at 25% 15%, rgba(255,255,255,0.78), rgba(0,0,0,0.02)),
                    repeating-linear-gradient(45deg, rgba(0,0,0,0.03), rgba(0,0,0,0.03) 10px, rgba(255,255,255,0.00) 10px, rgba(255,255,255,0.00) 20px);
            padding:12px;
            min-height:190px;
            box-shadow: inset 0 0 0 1px rgba(0,0,0,0.10);
            transition: box-shadow .15s ease, transform .15s ease;
        }
        .zone:hover{
            box-shadow: inset 0 0 0 2px rgba(30,111,255,0.28), 0 10px 22px rgba(0,0,0,0.08);
            transform: translateY(-1px);
        }
        .zone h3{ margin:0 0 10px 0; font-size:14px; color: var(--text); }

        .placed{
            background: rgba(255,255,255,0.86);
            border:1px solid rgba(0,0,0,0.10);
            border-radius:12px;
            padding:10px;
            margin-bottom:10px;
            box-shadow: 0 10px 22px rgba(0,0,0,0.10);
            font-size:13px;
            line-height:1.35;
            cursor:pointer;
            transition: opacity 0.2s;
            color: var(--muted);
        }
        .placed b{ color: var(--text); }
        .placed:hover { opacity: 0.7; text-decoration: line-through; }

        .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; }
        a.btn{
            padding: 12px 18px;
            border-radius:14px;
            text-decoration:none;
            color:white;
            font-weight:bold;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            box-shadow: 0 10px 22px rgba(30,111,255,0.25);
            display:inline-block;
        }
        a.btn:hover{ filter:brightness(1.05); }
        a.btn.secondary{
            background: rgba(255,255,255,0.92);
            color: var(--text);
            border:1px solid var(--line);
            box-shadow: 0 10px 22px rgba(0,0,0,0.10);
        }

        /* Modal */
        .modal{
            position:fixed;
            inset:0;
            background: rgba(10, 12, 16, 0.78);
            display:none;
            justify-content:center;
            align-items:center;
            padding:20px;
            z-index:999;
        }
        .modal.on{ display:flex; }
        .modal-card{
            width:min(980px, 96vw);
            max-height: 92vh;
            background: rgba(255,255,255,0.96);
            border-radius:18px;
            border:1px solid var(--line);
            box-shadow: 0 18px 48px rgba(0,0,0,0.30);
            overflow:hidden;
        }
        .modal-head{
            display:flex;
            justify-content:space-between;
            align-items:center;
            gap:12px;
            padding:12px 14px;
            background: linear-gradient(135deg, rgba(30,111,255,0.12), rgba(0,0,0,0.03));
            border-bottom:1px solid rgba(0,0,0,0.10);
        }
        .modal-title{
            font-weight:800;
            color: var(--text);
            font-size:14px;
        }
        .modal-close{
            border:none;
            cursor:pointer;
            border-radius:999px;
            padding:8px 12px;
            font-weight:bold;
            background: rgba(255,255,255,0.92);
            color: var(--text);
            border:1px solid var(--line);
            box-shadow: 0 10px 22px rgba(0,0,0,0.10);
            pointer-events:auto;
            opacity:1;
        }
        .modal-body{
            padding:14px;
            background: rgba(255,255,255,0.92);
        }
        .modal-body img{
            width:100%;
            height:auto;
            display:block;
            border-radius:14px;
            border:1px solid rgba(0,0,0,0.10);
            box-shadow: 0 12px 28px rgba(0,0,0,0.12);
        }

        @media (max-width: 900px){
            .scene-grid{ grid-template-columns: 1fr; }
            .zones{ grid-template-columns: 1fr; }
            .shot img{ height:220px; }
        }
    </style>
</head>

<body>
<div class="wrap">
    <div class="card">
        <div class="nav">
            <a class="pill" href="index.html">üè† Eingang</a>
            <a class="pill" href="lila.html">üé® Lila</a>
            <a class="pill active" href="mateo_aufgabe.html">‚ö†Ô∏è Mateo Aufgabe</a>
            <a class="pill" href="yara.html">üìö Yara</a>
            <a class="pill" href="abschluss.html">‚≠ê Abschluss</a>
        </div>

        <h2>‚ö†Ô∏è Station 2 ‚Äì Mateos Manipulationslabyrinth</h2>
        <p>
            <b>Aufgabe:</b> 6 Kacheln (3 Text-Szenen + 3 Screenshots).
            W√§hle eine Kachel und ordne zu: ‚úî Echt / ü§ñ KI / ‚ö†Ô∏è Manipulativ / ‚ûñ Neutral.
            <br><b>Reversibilit√§t:</b> ‚Ü©Ô∏è Undo macht den letzten Schritt r√ºckg√§ngig.
        </p>

        <div class="scene-grid">
            <!-- TEXT 1‚Äì3 -->
            <div class="scene" data-kind="text" data-id="T1">
                <div class="scene-title">Szene 1 ¬∑ Influencer-Chat <span class="tag">Text</span></div>
                <p class="scene-text">‚ÄûKauf das JETZT, sonst bist du uncool. Alle haben‚Äôs schon.‚Äú</p>
            </div>

            <div class="scene" data-kind="text" data-id="T2">
                <div class="scene-title">Szene 2 ¬∑ Perfektes Selfie <span class="tag">Text</span></div>
                <p class="scene-text">Bild wirkt extrem glatt: perfekte Haut, unrealistische Lichtreflexe, keine Poren.</p>
            </div>

            <div class="scene" data-kind="text" data-id="T3">
                <div class="scene-title">Szene 3 ¬∑ Freundesfoto <span class="tag">Text</span></div>
                <p class="scene-text">‚ÄûBin gerade am See. Das Wetter ist mies, aber egal. üòÇ‚Äú</p>
            </div>

            <!-- SCREENSHOTS 1‚Äì3 (ROOT!) -->
            <div class="scene" data-kind="img" data-id="S1"
                 data-img="shot1.png"
                 data-imgtitle="Screenshot 1">
                <div class="scene-title">Screenshot 1 <span class="tag">Bild</span></div>
                <p class="scene-text">Klicke zum Vergr√∂√üern und ordne zu.</p>
                <div class="shot" role="button" tabindex="0" aria-label="Screenshot 1 √∂ffnen">
                    <img src="shot1.png" alt="Screenshot 1">
                    <div class="shot-caption">Bild √∂ffnen (klicken)</div>
                </div>
            </div>

            <div class="scene" data-kind="img" data-id="S2"
                 data-img="shot2.png"
                 data-imgtitle="Screenshot 2">
                <div class="scene-title">Screenshot 2 <span class="tag">Bild</span></div>
                <p class="scene-text">Klicke zum Vergr√∂√üern und ordne zu.</p>
                <div class="shot" role="button" tabindex="0" aria-label="Screenshot 2 √∂ffnen">
                    <img src="shot2.png" alt="Screenshot 2">
                    <div class="shot-caption">Bild √∂ffnen (klicken)</div>
                </div>
            </div>

            <div class="scene" data-kind="img" data-id="S3"
                 data-img="shot3.png"
                 data-imgtitle="Screenshot 3">
                <div class="scene-title">Screenshot 3 <span class="tag">Bild</span></div>
                <p class="scene-text">Klicke zum Vergr√∂√üern und ordne zu.</p>
                <div class="shot" role="button" tabindex="0" aria-label="Screenshot 3 √∂ffnen">
                    <img src="shot3.png" alt="Screenshot 3">
                    <div class="shot-caption">Bild √∂ffnen (klicken)</div>
                </div>
            </div>
        </div>

        <div class="toolbar" aria-label="Zuordnungswerkzeuge">
            <button id="btnEcht" type="button">‚úî Ist Echt</button>
            <button id="btnKI" type="button">ü§ñ Ist KI-generiert</button>
            <button id="btnManip" type="button">‚ö†Ô∏è Ist Manipulativ</button>
            <button id="btnNeutral" type="button">‚ûñ Ist Neutral</button>

            <button id="btnUndo" class="secondary" type="button" disabled>‚Ü©Ô∏è Undo</button>
            <button id="btnReset" class="secondary" type="button">üóëÔ∏è Reset</button>
        </div>

        <div class="zones">
            <div class="zone">
                <h3>‚úî Echt</h3>
                <div id="zoneEcht"></div>
            </div>
            <div class="zone">
                <h3>ü§ñ KI-generiert</h3>
                <div id="zoneKI"></div>
            </div>
            <div class="zone">
                <h3>‚ö†Ô∏è Manipulativ</h3>
                <div id="zoneManip"></div>
            </div>
            <div class="zone">
                <h3>‚ûñ Neutral</h3>
                <div id="zoneNeutral"></div>
            </div>
        </div>

        <div class="row">
            <a class="btn secondary" href="mateo.html">‚Üê Zur√ºck</a>
            <a class="btn" href="yara.html">Weiter ‚Üí Station 3</a>
        </div>

        <p style="margin-top:12px; font-size:13px; opacity:0.9;">
            <b>Frage:</b> Wie k√∂nnte Mateo KI-generierten und menschlichen Content in Zukunft besser voneinander unterscheiden?
        </p>
    </div>
</div>

<!-- Modal -->
<div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-label="Screenshot Gro√üansicht">
        <div class="modal-head">
            <div class="modal-title" id="modalTitle">Screenshot</div>
            <button class="modal-close" id="modalClose" type="button">‚úï Schlie√üen</button>
        </div>
        <div class="modal-body">
            <img id="modalImg" src="" alt="Screenshot Gro√üansicht">
        </div>
    </div>
</div>

<script>
    const scenes = document.querySelectorAll(".scene");

    const zoneEcht = document.getElementById("zoneEcht");
    const zoneKI = document.getElementById("zoneKI");
    const zoneManip = document.getElementById("zoneManip");
    const zoneNeutral = document.getElementById("zoneNeutral");

    const btnEcht = document.getElementById("btnEcht");
    const btnKI = document.getElementById("btnKI");
    const btnManip = document.getElementById("btnManip");
    const btnNeutral = document.getElementById("btnNeutral");

    const btnReset = document.getElementById("btnReset");
    const btnUndo = document.getElementById("btnUndo");

    const actionButtons = [btnEcht, btnKI, btnManip, btnNeutral];

    let selectedScene = null;

    // Undo Stack = inverse Operationen
    const history = [];

    function clearSelection(){
        scenes.forEach(s => s.classList.remove("selected"));
        selectedScene = null;

        actionButtons.forEach(b => b.classList.remove("active-btn"));
        btnEcht.textContent = "‚úî Ist Echt";
        btnKI.textContent = "ü§ñ Ist KI-generiert";
        btnManip.textContent = "‚ö†Ô∏è Ist Manipulativ";
        btnNeutral.textContent = "‚ûñ Ist Neutral";
    }

    function updateUndo(){
        btnUndo.disabled = (history.length === 0);
    }

    scenes.forEach(scene => {
        scene.addEventListener("click", (e) => {
            const shot = e.target.closest(".shot");
            if(shot){
                openModalFromScene(scene);
                return;
            }

            scenes.forEach(s => s.classList.remove("selected"));
            scene.classList.add("selected");
            selectedScene = scene;

            actionButtons.forEach(b => b.classList.add("active-btn"));

            const id = scene.getAttribute("data-id");
            const kind = scene.getAttribute("data-kind");
            const label = (kind === "img") ? `Screenshot ${id.replace("S","")}` : `Szene ${id.replace("T","")}`;

            btnEcht.textContent = `‚úî ${label} ist Echt`;
            btnKI.textContent = `ü§ñ ${label} ist KI`;
            btnManip.textContent = `‚ö†Ô∏è ${label} ist Manipulativ`;
            btnNeutral.textContent = `‚ûñ ${label} ist Neutral`;
        });

        const shot = scene.querySelector(".shot");
        if(shot){
            shot.addEventListener("keydown", (ev) => {
                if(ev.key === "Enter" || ev.key === " "){
                    ev.preventDefault();
                    openModalFromScene(scene);
                }
            });
        }
    });

    function placeTo(zone){
        if(!selectedScene) return;

        const kind = selectedScene.getAttribute("data-kind");
        const titleEl = selectedScene.querySelector(".scene-title");
        const textEl  = selectedScene.querySelector(".scene-text");

        let title = titleEl ? titleEl.textContent.replace("Text","").replace("Bild","").trim() : "Aufgabe";
        let text  = textEl ? textEl.textContent.trim() : "";

        const item = document.createElement("div");
        item.className = "placed";

        if(kind === "img"){
            const img = selectedScene.getAttribute("data-img");
            item.innerHTML = "<b>" + escapeHtml(title) + "</b><br>üì∑ Screenshot eingeordnet";
            item.dataset.img = img || "";
            item.dataset.imgtitle = title;

            item.title = "Klicken zum Vergr√∂√üern (Shift+Klick = entfernen)";
            item.addEventListener("click", (ev) => {
                if(ev.shiftKey){
                    removePlaced(item);
                } else {
                    openModal(item.dataset.img, item.dataset.imgtitle || "Screenshot");
                }
            });
        } else {
            item.innerHTML = "<b>" + escapeHtml(title) + "</b><br>" + escapeHtml(text);
            item.title = "Klicken zum Entfernen (Undo verf√ºgbar)";
            item.addEventListener("click", () => removePlaced(item));
        }

        zone.appendChild(item);

        // Undo: Entfernen
        history.push(() => {
            if(item.isConnected) item.remove();
            updateUndo();
        });

        updateUndo();
        clearSelection();
    }

    function removePlaced(item){
        if(!item.isConnected) return;

        const parent = item.parentNode;
        const next = item.nextSibling;
        item.remove();

        // Undo: wieder einsetzen
        history.push(() => {
            if(!parent) return;
            if(next && next.parentNode === parent){
                parent.insertBefore(item, next);
            } else {
                parent.appendChild(item);
            }
            updateUndo();
        });

        updateUndo();
    }

    btnEcht.addEventListener("click", () => placeTo(zoneEcht));
    btnKI.addEventListener("click", () => placeTo(zoneKI));
    btnManip.addEventListener("click", () => placeTo(zoneManip));
    btnNeutral.addEventListener("click", () => placeTo(zoneNeutral));

    btnUndo.addEventListener("click", () => {
        const undo = history.pop();
        if(undo) undo();
        updateUndo();
    });

    btnReset.addEventListener("click", () => {
        const snapshot = [
            ...zoneEcht.querySelectorAll(".placed"),
            ...zoneKI.querySelectorAll(".placed"),
            ...zoneManip.querySelectorAll(".placed"),
            ...zoneNeutral.querySelectorAll(".placed"),
        ];

        if(snapshot.length === 0){
            clearSelection();
            history.length = 0;
            updateUndo();
            return;
        }

        // Undo: alles wiederherstellen
        const items = snapshot.map(node => ({ node, parent: node.parentNode }));
        history.push(() => {
            items.forEach(({node, parent}) => {
                if(parent) parent.appendChild(node);
            });
            updateUndo();
        });

        zoneEcht.innerHTML = "";
        zoneKI.innerHTML = "";
        zoneManip.innerHTML = "";
        zoneNeutral.innerHTML = "";

        clearSelection();
        updateUndo();
    });

    updateUndo();

    function escapeHtml(str){
        return String(str)
            .replaceAll("&", "&amp;")
            .replaceAll("<", "&lt;")
            .replaceAll(">", "&gt;")
            .replaceAll('"', "&quot;")
            .replaceAll("'", "&#039;");
    }

    // ===== Modal =====
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modalImg");
    const modalTitle = document.getElementById("modalTitle");
    const modalClose = document.getElementById("modalClose");

    function openModalFromScene(scene){
        const img = scene.getAttribute("data-img");
        const title = scene.getAttribute("data-imgtitle") || "Screenshot";
        if(!img) return;
        openModal(img, title);
    }

    function openModal(img, title){
        modalImg.src = img;
        modalTitle.textContent = title;
        modal.classList.add("on");
        modal.setAttribute("aria-hidden", "false");
    }

    function closeModal(){
        modal.classList.remove("on");
        modal.setAttribute("aria-hidden", "true");
        modalImg.src = "";
    }

    modalClose.addEventListener("click", closeModal);
    modal.addEventListener("click", (e) => {
        if(e.target === modal) closeModal();
    });
    document.addEventListener("keydown", (e) => {
        if(e.key === "Escape" && modal.classList.contains("on")){
            closeModal();
        }
    });
</script>
</body>
</html>
