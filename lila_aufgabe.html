<!doctype html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lila ‚Äì Aufgabe (Sticker + KI/Real Quiz)</title>

    <style>
        :root{
            --ink:#2a153d; --ink2:#4a1c7a;
            --card:rgba(255,255,255,0.90);
            --stroke:rgba(120,60,190,0.25);
            --shadow:0 12px 35px rgba(52,10,88,0.35);
            --btn: linear-gradient(135deg, #a35cff, #6a22cc);
        }

        body{
            margin:0;
            font-family: Arial, sans-serif;
            background: radial-gradient(circle at top, #e8dcff 0%, #c7a6ff 45%, #7a38b6 100%);
            min-height:100vh;
            display:flex;
            justify-content:center;
            align-items:center;
            padding:30px;
            color:var(--ink);
            box-sizing:border-box;
        }

        .wrap{ width:min(1100px, 95vw); display:grid; gap:16px; }
        .card{
            background: var(--card);
            border-radius: 18px;
            padding: 20px;
            box-shadow: var(--shadow);
            border:1px solid var(--stroke);
        }

        h2{ margin:0 0 10px 0; font-size: 28px; }
        p{ margin:0; line-height:1.6; }

        /* Werkzeug-Metapher: Tool-Leiste wirkt wie ‚ÄûWerkzeugkasten‚Äú */
        .toolbar{
            display:flex;
            gap:10px;
            flex-wrap:wrap;
            margin-top:14px;
            align-items:center;
            padding:10px;
            border-radius:16px;
            background: rgba(255,255,255,0.55);
            border:1px solid rgba(120,60,190,0.18);
            box-shadow: 0 10px 22px rgba(52,10,88,0.08);
        }

        button{
            border:none;
            cursor:pointer;
            border-radius:999px;
            padding:10px 14px;
            font-weight:bold;
            background: var(--btn);
            color:white;
            box-shadow: 0 10px 22px rgba(91,25,184,0.25);
            transition: filter 0.12s ease, transform 0.12s ease;
            white-space: nowrap;
            display:flex;
            align-items:center;
            gap:8px;
        }
        button:hover{ filter:brightness(1.05); transform: translateY(-1px); }
        button.active{ outline: 3px solid rgba(255,255,255,0.65); }

        .btn-secondary{
            background: rgba(255,255,255,0.92);
            color:var(--ink2);
            border:1px solid rgba(120,60,190,0.25);
            box-shadow: 0 10px 22px rgba(91,25,184,0.12);
        }

        button:disabled{
            cursor:not-allowed;
            opacity:0.55;
            transform:none !important;
            filter:none !important;
        }

        .hint{ margin-top:10px; font-size: 13px; opacity:0.85; }

        /* Interaktionsfl√§che (Signifier + Hover): ‚ÄúHier kannst du arbeiten‚Äù */
        .canvas{
            margin-top:14px;
            max-height:560px;
            overflow-y:auto;
            overflow-x:hidden;
            border-radius:16px;
            border:2px dashed rgba(110,40,190,0.35);
            background:
                    radial-gradient(circle at 20% 10%, rgba(255,255,255,0.85), rgba(255,255,255,0.65)),
                    repeating-linear-gradient(45deg, rgba(138,74,214,0.06), rgba(138,74,214,0.06) 10px, rgba(255,255,255,0.02) 10px, rgba(255,255,255,0.02) 20px);
            position:relative;
            user-select:none;
            padding-right:6px;
            box-shadow: inset 0 0 0 1px rgba(120,60,190,0.18);
            transition: box-shadow .15s ease, transform .15s ease;
        }
        .canvas:hover{
            box-shadow: inset 0 0 0 2px rgba(163,92,255,0.35), 0 10px 22px rgba(52,10,88,0.10);
            transform: translateY(-1px);
        }

        /* Cursor-Feedback (Pragmatik): wenn Tool aktiv -> Fadenkreuz */
        .canvas.place-mode{ cursor: crosshair; }
        .canvas:not(.place-mode){ cursor: default; }

        .canvas::-webkit-scrollbar { width: 10px; }
        .canvas::-webkit-scrollbar-thumb { background: rgba(106,34,204,0.35); border-radius: 999px; }
        .canvas::-webkit-scrollbar-track { background: rgba(255,255,255,0.35); border-radius: 999px; }

        .example-grid{
            display:grid;
            grid-template-columns: repeat(3, 1fr);
            gap:12px;
            padding:12px;
            box-sizing:border-box;
        }

        .example-card{
            background: rgba(255,255,255,0.75);
            border:1px solid rgba(120,60,190,0.18);
            border-radius:14px;
            padding:12px;
            box-shadow: 0 10px 22px rgba(52,10,88,0.10);
            position:relative;
            overflow:hidden;
        }

        .label{
            font-weight:800;
            font-size:13px;
            color:var(--ink2);
            margin-bottom:8px;
        }

        .ex-text{ margin:0; line-height:1.5; font-size:14px; }
        .ex-sub{ margin:10px 0 0 0; font-size:12px; opacity:0.85; }

        .img-grid-8{
            display:grid;
            grid-template-columns: 1fr 1fr;
            gap:10px;
            margin-top:10px;
        }

        .img-tile{
            border-radius:12px;
            border:2px dashed rgba(110,40,190,0.22);
            background: rgba(138,74,214,0.10);
            overflow:hidden;
            display:flex;
            flex-direction:column;
            position:relative;
            transition: transform .12s ease, box-shadow .12s ease;
        }
        .img-tile:hover{ transform: translateY(-1px); box-shadow: 0 10px 22px rgba(52,10,88,0.10); }

        .img-tile img{ width:100%; height:120px; object-fit:cover; display:block; }

        .tile-footer{
            display:flex;
            gap:8px;
            padding:8px 10px;
            align-items:center;
            justify-content:space-between;
            background: rgba(255,255,255,0.75);
            border-top:1px solid rgba(120,60,190,0.18);
            font-size:12px;
            font-weight:800;
            color:var(--ink2);
        }

        .choice{ display:flex; gap:6px; align-items:center; font-weight:700; }

        .chip{
            border:none;
            cursor:pointer;
            border-radius:999px;
            padding:6px 10px;
            font-size:12px;
            font-weight:800;
            background: rgba(255,255,255,0.95);
            color:var(--ink2);
            border:1px solid rgba(120,60,190,0.25);
            box-shadow: 0 8px 16px rgba(52,10,88,0.10);
            transition: filter 0.12s ease, transform 0.12s ease;
        }
        .chip:hover{ filter:brightness(1.03); transform: translateY(-1px); }
        .chip.selected{
            background: linear-gradient(135deg, #a35cff, #6a22cc);
            color:white;
            border-color: rgba(120,60,190,0.10);
        }

        .reveal-tag{
            position:absolute;
            top:10px;
            left:10px;
            padding:6px 10px;
            border-radius:999px;
            font-size:12px;
            font-weight:900;
            display:none;
            box-shadow: 0 10px 20px rgba(52,10,88,0.18);
            border:1px solid rgba(120,60,190,0.25);
            background: rgba(255,255,255,0.92);
        }
        .img-tile.revealed .reveal-tag{ display:inline-block; }

        .img-tile.correct{ outline: 4px solid rgba(60, 190, 120, 0.40); }
        .img-tile.wrong{ outline: 4px solid rgba(220, 60, 120, 0.40); }

        /* Sticker */
        .sticker{
            position:absolute;
            transform: translate(-50%, -50%);
            font-size:28px;
            cursor:pointer;
            padding:6px 10px;
            border-radius:14px;
            background: rgba(255,255,255,0.80);
            border:1px solid rgba(120,60,190,0.25);
            box-shadow:0 10px 22px rgba(52,10,88,0.18);
            z-index: 50;
            transition: transform .12s ease;
        }
        .sticker:hover{ transform: translate(-50%, -50%) scale(1.06); }

        .footer-row{
            margin-top:12px;
            display:flex;
            gap:10px;
            flex-wrap:wrap;
            align-items:center;
            justify-content:space-between;
        }

        a.back{
            display:inline-block;
            text-decoration:none;
            font-weight:bold;
            color:var(--ink2);
            padding:10px 0;
        }

        @media (max-width: 900px){
            .example-grid{ grid-template-columns: 1fr; }
            .img-grid-8{ grid-template-columns: 1fr; }
            .img-tile img{ height:200px; }
            .footer-row{ justify-content:flex-start; }
        }
    </style>
</head>

<body>
<div class="wrap">
    <div class="card">
        <h2>‚ú® Lilas Aufgabe ‚Äì Sticker setzen</h2>
        <p>W√§hle ein Werkzeug (Sticker) und klicke in die Fl√§che, um es zu platzieren. Sticker anklicken = entfernen.</p>

        <div class="toolbar" aria-label="Werkzeuge">
            <button class="tool" data-sticker="üß¨" type="button"><span>üß¨</span><span>Einzigartig</span></button>
            <button class="tool" data-sticker="üíú" type="button"><span>üíú</span><span>Emotional</span></button>
            <button class="tool" data-sticker="‚ú®" type="button"><span>‚ú®</span><span>Wirkt wie KI</span></button>

            <button id="undoSticker" class="btn-secondary" type="button" disabled>‚Ü©Ô∏è Undo</button>
            <button id="clearAll" class="btn-secondary" type="button">üóëÔ∏è Alles l√∂schen</button>
        </div>

        <div class="hint">
            Ordne <b>jedem</b> Bild ‚ÄûKI‚Äú oder ‚ÄûReal‚Äú zu. <br>
            Erst wenn alles gesetzt ist, wird <b>Aufl√∂sen</b> aktiv.
        </div>

        <div class="canvas" id="canvas" aria-label="Interaktionsfl√§che (klickbar)">
            <div class="example-grid">
                <div class="example-card">
                    <div class="label">Beispiel A ¬∑ Text</div>
                    <p class="ex-text">
                        ‚ÄûIch hab heute beim Zeichnen gemerkt, dass meine Linie wackelt, wenn ich gestresst bin.
                        Aber genau das f√ºhlt sich nach mir an ‚Äì wie ein Tagebucheintrag in Strichen.‚Äú
                    </p>
                    <p class="ex-sub">Setze Sticker: Was wirkt pers√∂nlich/menschlich?</p>
                </div>

                <div class="example-card">
                    <div class="label">Beispiel B ¬∑ Text</div>
                    <p class="ex-text">
                        ‚ÄûKreativit√§t ist ein wichtiger Prozess, der durch unterschiedliche Techniken gef√∂rdert werden kann.
                        Es empfiehlt sich, regelm√§√üig zu √ºben und Inspiration aus verschiedenen Quellen zu nutzen.‚Äú
                    </p>
                    <p class="ex-sub">Setze Sticker: Was wirkt generisch/glatt?</p>
                </div>

                <div class="example-card">
                    <div class="label">Beispiel C ¬∑ Bild-Quiz (8 Bilder)</div>

                    <div class="toolbar" style="margin-top:8px;">
                        <button class="btn-secondary" id="revealBtn" type="button" disabled>üîç Aufl√∂sen</button>
                        <button class="btn-secondary" id="resetQuiz" type="button">‚Ü∫ Quiz zur√ºcksetzen</button>
                    </div>

                    <div class="img-grid-8" id="grid8"></div>

                    <p class="ex-sub">Tipp: Achte auf H√§nde, Texturen, Licht, ‚Äûzu perfekte‚Äú Details, komische Perspektiven.</p>
                </div>
            </div>
        </div>

        <div class="footer-row">
            <a class="back" href="lila.html">‚Üê Zur√ºck zur Station</a>
            <button class="btn-secondary" type="button" onclick="window.location.href='mateo.html'">‚ûú Weiter zu Station 2</button>
        </div>
    </div>
</div>

<script>
    // ---------- Sticker System (mit Undo) ----------
    const canvas = document.getElementById("canvas");
    const clearAll = document.getElementById("clearAll");
    const undoSticker = document.getElementById("undoSticker");
    const tools = document.querySelectorAll(".tool");

    let activeSticker = null;
    const stickerHistory = []; // Stack f√ºr Undo (Inverse Operation)

    function setPlaceMode(on){
        canvas.classList.toggle("place-mode", on);
    }

    tools.forEach(btn => {
        btn.addEventListener("click", () => {
            tools.forEach(b => b.classList.remove("active"));
            btn.classList.add("active");
            activeSticker = btn.dataset.sticker;
            setPlaceMode(true); // Pragmatik: Cursor sagt ‚Äúdu platzierst jetzt‚Äù
        });
    });

    canvas.addEventListener("click", (e) => {
        if (!activeSticker) return;

        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        const sticker = document.createElement("div");
        sticker.className = "sticker";
        sticker.textContent = activeSticker;
        sticker.style.left = x + "px";
        sticker.style.top = y + "px";

        sticker.addEventListener("click", (ev) => {
            ev.stopPropagation();
            sticker.remove();
            // Entfernen per Klick ist bereits eine inverse Operation (lokal).
        });

        canvas.appendChild(sticker);

        // Undo-Stack
        stickerHistory.push(sticker);
        undoSticker.disabled = (stickerHistory.length === 0);
    });

    undoSticker.addEventListener("click", () => {
        const last = stickerHistory.pop();
        if (last && last.isConnected) last.remove();
        undoSticker.disabled = (stickerHistory.length === 0);
    });

    clearAll.addEventListener("click", () => {
        canvas.querySelectorAll(".sticker").forEach(s => s.remove());
        stickerHistory.length = 0;
        undoSticker.disabled = true;
    });

    // ---------- Bild-Quiz System (8 Bilder) ----------
    const grid8 = document.getElementById("grid8");
    const revealBtn = document.getElementById("revealBtn");
    const resetQuiz = document.getElementById("resetQuiz");

    const images = [
        { file: "./Bildschirmfoto%202026-01-22%20um%2020.54.13.png", truth: "KI" },
        { file: "./Bildschirmfoto%202026-01-22%20um%2020.54.19.png", truth: "KI" },
        { file: "./Bildschirmfoto%202026-01-22%20um%2020.54.24.png", truth: "KI" },
        { file: "./Bildschirmfoto%202026-01-22%20um%2020.54.30.png", truth: "KI" },
        { file: "./Bildschirmfoto%202026-01-22%20um%2020.54.34.png", truth: "Real" },
        { file: "./Bildschirmfoto%202026-01-22%20um%2020.54.38.png", truth: "Real" },
        { file: "./Bildschirmfoto%202026-01-22%20um%2020.54.41.png", truth: "Real" },
        { file: "./Bildschirmfoto%202026-01-22%20um%2020.54.44.png", truth: "Real" },
    ];

    const choices = new Map(); // index -> "KI" / "Real"
    let revealed = false;

    function updateRevealButton(){
        const allChosen = (choices.size === images.length);
        revealBtn.disabled = !(allChosen && !revealed);
    }

    function createTile(idx){
        const item = images[idx];

        const tile = document.createElement("div");
        tile.className = "img-tile";
        tile.dataset.idx = String(idx);

        const img = document.createElement("img");
        img.src = item.file;
        img.alt = "Bild " + (idx + 1);

        const tag = document.createElement("div");
        tag.className = "reveal-tag";
        tag.textContent = "‚Äî";

        const footer = document.createElement("div");
        footer.className = "tile-footer";

        const left = document.createElement("div");
        left.textContent = "Bild " + (idx + 1);

        const right = document.createElement("div");
        right.className = "choice";

        const btnKI = document.createElement("button");
        btnKI.className = "chip";
        btnKI.type = "button";
        btnKI.textContent = "KI";

        const btnReal = document.createElement("button");
        btnReal.className = "chip";
        btnReal.type = "button";
        btnReal.textContent = "Real";

        function setChoice(val){
            if (revealed) return;
            choices.set(idx, val);

            btnKI.classList.toggle("selected", val === "KI");
            btnReal.classList.toggle("selected", val === "Real");

            updateRevealButton();
        }

        btnKI.addEventListener("click", (e) => { e.stopPropagation(); setChoice("KI"); });
        btnReal.addEventListener("click", (e) => { e.stopPropagation(); setChoice("Real"); });

        right.appendChild(btnKI);
        right.appendChild(btnReal);

        footer.appendChild(left);
        footer.appendChild(right);

        tile.appendChild(img);
        tile.appendChild(tag);
        tile.appendChild(footer);

        return tile;
    }

    function renderGrid(){
        grid8.innerHTML = "";
        images.forEach((_, idx) => grid8.appendChild(createTile(idx)));
        updateRevealButton();
    }

    function reveal(){
        if (revealBtn.disabled) return;
        revealed = true;
        revealBtn.disabled = true;

        const tiles = grid8.querySelectorAll(".img-tile");
        tiles.forEach(tile => {
            const idx = Number(tile.dataset.idx);
            const truth = images[idx].truth;
            const user = choices.get(idx);

            tile.classList.add("revealed");
            tile.classList.remove("correct", "wrong");

            const tag = tile.querySelector(".reveal-tag");
            tag.textContent = truth === "KI" ? "ü§ñ KI" : "üì∑ Real";

            if (user === truth) tile.classList.add("correct");
            else tile.classList.add("wrong");
        });
    }

    function resetAll(){
        choices.clear();
        revealed = false;
        renderGrid();
    }

    revealBtn.addEventListener("click", reveal);
    resetQuiz.addEventListener("click", resetAll);
    renderGrid();
</script>
</body>
</html>
